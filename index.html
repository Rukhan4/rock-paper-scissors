<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock Paper Scissors</title>
</head>

<body>
    <script>

        let playerWins = false;
        let computerWins = false;
        let playerScore = 0;
        let computerScore = 0;
        let gameon = true;

        function computerPlay() {
            let choices = ['rock', 'paper', 'scissors'];
            let randomChoice = choices[Math.floor(Math.random() * choices.length)];
            return randomChoice;
        }

        function playRound(playerSelection, computerSelection) {
            // validate user input
            while (true) {
                playerSelection = prompt("Rock, Paper, or Scissors?").toLowerCase();
                if (playerSelection == "rock" || playerSelection == "paper" || playerSelection == "scissors") {
                    break;
                } else {
                    alert("Please enter rock, paper, or scissors.");
                }
            }
            computerSelection = computerPlay();
            if (playerSelection === computerSelection) {
                playerWins = false;
                computerWins = false;
            } else if ((playerSelection === 'rock' && computerSelection === 'scissors') ||
                (playerSelection === 'paper' && computerSelection === 'rock') ||
                (playerSelection === 'scissors' && computerSelection === 'paper')) {
                playerWins = true;
                computerWins = false;
            } else {
                playerWins = false;
                computerWins = true;

            }
        }

        function game() {
            while (gameon) {
                round = playRound();
                if (playerWins) {
                    playerScore++;
                    console.log("You win this round! :)")
                } else if (computerWins) {
                    computerScore++;
                    console.log("You lost this round! :(")
                } else {
                    console.log("Tie!")
                }
                if (playerScore === 5) {
                    return `You won the game!
                    Score was Player ${playerScore}: Opponent ${computerScore}`;
                    gameon = false;
                } else if (computerScore === 5) {
                    return `You lost the game!
                    Score was Player ${playerScore}: Opponent ${computerScore}`;
                    gameon = false;
                }
            }
        }

        console.log(game());
    </script>

</body>

</html>